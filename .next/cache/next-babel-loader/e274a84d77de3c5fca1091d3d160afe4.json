{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(getPostsSaga),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(createPostSaga),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(rootSaga);\n\nimport { call, put, all, takeEvery } from 'redux-saga/effects';\nimport { actions } from '@Features/Posts/Model/actions';\nimport { API } from '@API/index';\nimport * as types from './types';\n\nfunction getPostsSaga() {\n  var response;\n  return _regeneratorRuntime.wrap(function getPostsSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return put(actions.setLoading(true));\n\n        case 2:\n          _context.prev = 2;\n          _context.next = 5;\n          return call(API.PostsAPI.getPosts);\n\n        case 5:\n          response = _context.sent;\n          _context.next = 8;\n          return put(actions.setPosts(response.data));\n\n        case 8:\n          _context.next = 10;\n          return put(actions.setLoading(false));\n\n        case 10:\n          _context.next = 17;\n          break;\n\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](2);\n          _context.next = 16;\n          return put(actions.setLoading(false));\n\n        case 16:\n          console.log(_context.t0);\n\n        case 17:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[2, 12]]);\n}\n\nfunction createPostSaga(_ref) {\n  var payload, data, history, response;\n  return _regeneratorRuntime.wrap(function createPostSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          payload = _ref.payload;\n          data = payload.data, history = payload.history;\n          _context2.next = 4;\n          return put(actions.setLoading(true));\n\n        case 4:\n          _context2.prev = 4;\n          _context2.next = 7;\n          return call(API.PostsAPI.createPost, payload);\n\n        case 7:\n          _context2.next = 9;\n          return call(API.PostsAPI.getPosts);\n\n        case 9:\n          response = _context2.sent;\n          _context2.next = 12;\n          return put(actions.setPosts(response.data));\n\n        case 12:\n          _context2.next = 14;\n          return put(actions.setLoading(false));\n\n        case 14:\n          _context2.next = 16;\n          return put(history.push('/'));\n\n        case 16:\n          _context2.next = 23;\n          break;\n\n        case 18:\n          _context2.prev = 18;\n          _context2.t0 = _context2[\"catch\"](4);\n          _context2.next = 22;\n          return put(actions.setLoading(false));\n\n        case 22:\n          console.log(_context2.t0);\n\n        case 23:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[4, 18]]);\n}\n\nexport function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return all([takeEvery(types.GET_POSTS, getPostsSaga), takeEvery(types.CREATE_POST, createPostSaga)]);\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Create-Project/src/Components/Features/Posts/Model/saga.ts"],"names":["getPostsSaga","createPostSaga","rootSaga","call","put","all","takeEvery","actions","API","types","setLoading","PostsAPI","getPosts","response","setPosts","data","console","log","payload","history","createPost","push","GET_POSTS","CREATE_POST"],"mappings":";;oDAMUA,Y;qDAgBAC,c;qDAcOC,Q;;AApCjB,SAASC,IAAT,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,SAAzB,QAA0C,oBAA1C;AAEA,SAASC,OAAT,QAAwB,+BAAxB;AACA,SAASC,GAAT,QAA8B,YAA9B;AACA,OAAO,KAAKC,KAAZ,MAAuB,SAAvB;;AAEA,SAAUT,YAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACC,iBAAMI,GAAG,CAACG,OAAO,CAACG,UAAR,CAAmB,IAAnB,CAAD,CAAT;;AADD;AAAA;AAAA;AAGmB,iBAAMP,IAAI,CAACK,GAAG,CAACG,QAAJ,CAAaC,QAAd,CAAV;;AAHnB;AAGQC,UAAAA,QAHR;AAAA;AAIE,iBAAMT,GAAG,CAACG,OAAO,CAACO,QAAR,CAAiBD,QAAQ,CAACE,IAA1B,CAAD,CAAT;;AAJF;AAAA;AAKE,iBAAMX,GAAG,CAACG,OAAO,CAACG,UAAR,CAAmB,KAAnB,CAAD,CAAT;;AALF;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAOE,iBAAMN,GAAG,CAACG,OAAO,CAACG,UAAR,CAAmB,KAAnB,CAAD,CAAT;;AAPF;AAQEM,UAAAA,OAAO,CAACC,GAAR;;AARF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgBA,SAAUhB,cAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2BiB,UAAAA,OAA3B,QAA2BA,OAA3B;AACQH,UAAAA,IADR,GACyBG,OADzB,CACQH,IADR,EACcI,OADd,GACyBD,OADzB,CACcC,OADd;AAAA;AAEC,iBAAMf,GAAG,CAACG,OAAO,CAACG,UAAR,CAAmB,IAAnB,CAAD,CAAT;;AAFD;AAAA;AAAA;AAIE,iBAAMP,IAAI,CAACK,GAAG,CAACG,QAAJ,CAAaS,UAAd,EAA0BF,OAA1B,CAAV;;AAJF;AAAA;AAKmB,iBAAMf,IAAI,CAACK,GAAG,CAACG,QAAJ,CAAaC,QAAd,CAAV;;AALnB;AAKQC,UAAAA,QALR;AAAA;AAME,iBAAMT,GAAG,CAACG,OAAO,CAACO,QAAR,CAAiBD,QAAQ,CAACE,IAA1B,CAAD,CAAT;;AANF;AAAA;AAOE,iBAAMX,GAAG,CAACG,OAAO,CAACG,UAAR,CAAmB,KAAnB,CAAD,CAAT;;AAPF;AAAA;AAQE,iBAAMN,GAAG,CAACe,OAAO,CAACE,IAAR,CAAa,GAAb,CAAD,CAAT;;AARF;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAUE,iBAAMjB,GAAG,CAACG,OAAO,CAACG,UAAR,CAAmB,KAAnB,CAAD,CAAT;;AAVF;AAWEM,UAAAA,OAAO,CAACC,GAAR;;AAXF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAcA,OAAO,SAAUf,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACN,iBAAMG,GAAG,CAAC,CACTC,SAAS,CAACG,KAAK,CAACa,SAAP,EAAkBtB,YAAlB,CADA,EAETM,SAAS,CAACG,KAAK,CAACc,WAAP,EAAoBtB,cAApB,CAFA,CAAD,CAAT;;AADM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { call, put, all, takeEvery } from 'redux-saga/effects'\r\nimport { push } from 'connected-next-router'\r\nimport { actions } from '@Features/Posts/Model/actions'\r\nimport { API, PostType } from '@API/index'\r\nimport * as types from './types'\r\n\r\nfunction* getPostsSaga() {\r\n\tyield put(actions.setLoading(true))\r\n\ttry {\r\n\t\tconst response = yield call(API.PostsAPI.getPosts)\r\n\t\tyield put(actions.setPosts(response.data))\r\n\t\tyield put(actions.setLoading(false))\r\n\t} catch (error) {\r\n\t\tyield put(actions.setLoading(false))\r\n\t\tconsole.log(error)\r\n\t}\r\n}\r\n\r\ninterface CreatePost {\r\n\ttype: string\r\n\tpayload: {data: PostType, history: any}\r\n}\r\nfunction* createPostSaga({ payload }: CreatePost) {\r\n\tconst {data, history} = payload\r\n\tyield put(actions.setLoading(true))\r\n\ttry {\r\n\t\tyield call(API.PostsAPI.createPost, payload)\r\n\t\tconst response = yield call(API.PostsAPI.getPosts)\r\n\t\tyield put(actions.setPosts(response.data))\r\n\t\tyield put(actions.setLoading(false))\r\n\t\tyield put(history.push('/'))\r\n\t} catch (error) {\r\n\t\tyield put(actions.setLoading(false))\r\n\t\tconsole.log(error)\r\n\t}\r\n}\r\nexport function* rootSaga() {\r\n\tyield all([\r\n\t\ttakeEvery(types.GET_POSTS, getPostsSaga),\r\n\t\ttakeEvery(types.CREATE_POST, createPostSaga),\r\n\t])\r\n}\r\n"]},"metadata":{},"sourceType":"module"}